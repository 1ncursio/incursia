{"version":3,"sources":["webpack://_N_E/./node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?1520","webpack://_N_E/./node_modules/antd/es/tag/CheckableTag.js","webpack://_N_E/./node_modules/antd/es/tag/index.js","webpack://_N_E/./reducers/post.js","webpack://_N_E/./components/TagForm.tsx","webpack://_N_E/./pages/upload.tsx","webpack://_N_E/./node_modules/@ant-design/icons-svg/es/asn/PlusOutlined.js","webpack://_N_E/./node_modules/@ant-design/icons/es/icons/PlusOutlined.js"],"names":["window","__NEXT_P","push","__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","_a","_classNames","customizePrefixCls","prefixCls","className","checked","onChange","onClick","restProps","getPrefixCls","cls","concat","PresetColorRegex","RegExp","join","PresetStatusColorRegex","ref","style","children","icon","color","onClose","closeIcon","_a$closable","closable","props","_React$useContext","direction","_React$useState","_React$useState2","visible","setVisible","isPresetColor","test","tagStyle","backgroundColor","undefined","presetColor","tagClassName","handleCloseClick","stopPropagation","defaultPrevented","isNeedWave","type","tagProps","omit","iconNode","kids","tagNode","CloseOutlined","Tag","displayName","CheckableTag","initialState","imagePaths","addedPostId","addedCommentId","hasMorePosts","likePostLoading","likePostDone","likePostError","dislikePostLoading","dislikePostDone","dislikePostError","addPostLoading","addPostDone","addPostError","removedCommentId","removePostLoading","removePostDone","removePostError","addCommentLoading","addCommentDone","addCommentError","removeCommentLoading","removeCommentDone","removeCommentError","uploadImagesLoading","uploadImagesDone","uploadImagesError","UPLOAD_IMAGES_REQUEST","UPLOAD_IMAGES_SUCCESS","UPLOAD_IMAGES_FAILURE","LIKE_POST_REQUEST","LIKE_POST_SUCCESS","LIKE_POST_FAILURE","DISLIKE_POST_REQUEST","DISLIKE_POST_SUCCESS","DISLIKE_POST_FAILURE","ADD_POST_REQUEST","ADD_POST_SUCCESS","ADD_POST_FAILURE","REMOVE_POST_REQUEST","REMOVE_POST_SUCCESS","REMOVE_POST_FAILURE","ADD_COMMENT_REQUEST","ADD_COMMENT_SUCCESS","ADD_COMMENT_FAILURE","ADD_REPLY_REQUEST","ADD_REPLY_SUCCESS","ADD_REPLY_FAILURE","REMOVE_COMMENT_REQUEST","REMOVE_COMMENT_SUCCESS","REMOVE_COMMENT_FAILURE","REMOVE_IMAGE","reducer","state","action","produce","draft","filter","v","data","error","id","TagForm","tags","setTags","useState","inputVisible","setInputVisible","editInputIndex","setEditInputIndex","useInput","inputValue","onChangeInputValue","setInputValue","editInputValue","onChangeEditInputValue","setEditInputValue","useCallback","removedTag","tag","onBlurEditInput","newTags","onBlurInput","showInput","map","index","autoFocus","size","value","onBlur","onPressEnter","width","isLongTag","tagElem","onDoubleClick","preventDefault","slice","title","PlusOutlined","Paragraph","Typography","TextArea","Input","getBase64","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","upload","dispatch","useDispatch","userData","useSWR","fetcher","useSelector","post","useEffect","Router","replace","onChangeTitle","caption","onChangeCaption","fileList","setFileList","fileSize","setFileSize","previewImage","setPreviewImage","previewTitle","setPreviewTitle","previewVisible","setPreviewVisible","onCancel","onPreview","a","console","log","originFileObj","url","preview","name","substring","lastIndexOf","onChangeFileList","newFileList","fileSizes","Math","round","reduce","c","onRemoveFile","fileIndex","findIndex","beforeUpload","message","imageFormData","FormData","append","onFinish","uploadButton","marginTop","status","ExpiredValidation","AppLayout","justify","gutter","span","Item","accept","multiple","maxCount","listType","onRemove","footer","alt","src","placeholder","rows","htmlType","AntdIcon","assign"],"mappings":"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","file":"static/chunks/pages/upload-b0ed12203013444e8bbe.js","sourcesContent":["\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/upload\",\n        function () {\n          return require(\"private-next-pages/upload.tsx\");\n        }\n      ]);\n    ","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { ConfigContext } from '../config-provider';\n\nvar CheckableTag = function CheckableTag(_a) {\n  var _classNames;\n\n  var customizePrefixCls = _a.prefixCls,\n      className = _a.className,\n      checked = _a.checked,\n      onChange = _a.onChange,\n      onClick = _a.onClick,\n      restProps = __rest(_a, [\"prefixCls\", \"className\", \"checked\", \"onChange\", \"onClick\"]);\n\n  var _React$useContext = React.useContext(ConfigContext),\n      getPrefixCls = _React$useContext.getPrefixCls;\n\n  var handleClick = function handleClick(e) {\n    if (onChange) {\n      onChange(!checked);\n    }\n\n    if (onClick) {\n      onClick(e);\n    }\n  };\n\n  var prefixCls = getPrefixCls('tag', customizePrefixCls);\n  var cls = classNames(prefixCls, (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-checkable\"), true), _defineProperty(_classNames, \"\".concat(prefixCls, \"-checkable-checked\"), checked), _classNames), className);\n  return /*#__PURE__*/React.createElement(\"span\", _extends({}, restProps, {\n    className: cls,\n    onClick: handleClick\n  }));\n};\n\nexport default CheckableTag;","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport omit from \"rc-util/es/omit\";\nimport CloseOutlined from \"@ant-design/icons/es/icons/CloseOutlined\";\nimport CheckableTag from './CheckableTag';\nimport { ConfigContext } from '../config-provider';\nimport { PresetColorTypes, PresetStatusColorTypes } from '../_util/colors';\nimport Wave from '../_util/wave';\nvar PresetColorRegex = new RegExp(\"^(\".concat(PresetColorTypes.join('|'), \")(-inverse)?$\"));\nvar PresetStatusColorRegex = new RegExp(\"^(\".concat(PresetStatusColorTypes.join('|'), \")$\"));\n\nvar InternalTag = function InternalTag(_a, ref) {\n  var _classNames;\n\n  var customizePrefixCls = _a.prefixCls,\n      className = _a.className,\n      style = _a.style,\n      children = _a.children,\n      icon = _a.icon,\n      color = _a.color,\n      onClose = _a.onClose,\n      closeIcon = _a.closeIcon,\n      _a$closable = _a.closable,\n      closable = _a$closable === void 0 ? false : _a$closable,\n      props = __rest(_a, [\"prefixCls\", \"className\", \"style\", \"children\", \"icon\", \"color\", \"onClose\", \"closeIcon\", \"closable\"]);\n\n  var _React$useContext = React.useContext(ConfigContext),\n      getPrefixCls = _React$useContext.getPrefixCls,\n      direction = _React$useContext.direction;\n\n  var _React$useState = React.useState(true),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      visible = _React$useState2[0],\n      setVisible = _React$useState2[1];\n\n  React.useEffect(function () {\n    if ('visible' in props) {\n      setVisible(props.visible);\n    }\n  }, [props.visible]);\n\n  var isPresetColor = function isPresetColor() {\n    if (!color) {\n      return false;\n    }\n\n    return PresetColorRegex.test(color) || PresetStatusColorRegex.test(color);\n  };\n\n  var tagStyle = _extends({\n    backgroundColor: color && !isPresetColor() ? color : undefined\n  }, style);\n\n  var presetColor = isPresetColor();\n  var prefixCls = getPrefixCls('tag', customizePrefixCls);\n  var tagClassName = classNames(prefixCls, (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-\").concat(color), presetColor), _defineProperty(_classNames, \"\".concat(prefixCls, \"-has-color\"), color && !presetColor), _defineProperty(_classNames, \"\".concat(prefixCls, \"-hidden\"), !visible), _defineProperty(_classNames, \"\".concat(prefixCls, \"-rtl\"), direction === 'rtl'), _classNames), className);\n\n  var handleCloseClick = function handleCloseClick(e) {\n    e.stopPropagation();\n\n    if (onClose) {\n      onClose(e);\n    }\n\n    if (e.defaultPrevented) {\n      return;\n    }\n\n    if (!('visible' in props)) {\n      setVisible(false);\n    }\n  };\n\n  var renderCloseIcon = function renderCloseIcon() {\n    if (closable) {\n      return closeIcon ? /*#__PURE__*/React.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-close-icon\"),\n        onClick: handleCloseClick\n      }, closeIcon) : /*#__PURE__*/React.createElement(CloseOutlined, {\n        className: \"\".concat(prefixCls, \"-close-icon\"),\n        onClick: handleCloseClick\n      });\n    }\n\n    return null;\n  };\n\n  var isNeedWave = 'onClick' in props || children && children.type === 'a';\n  var tagProps = omit(props, ['visible']);\n  var iconNode = icon || null;\n  var kids = iconNode ? /*#__PURE__*/React.createElement(React.Fragment, null, iconNode, /*#__PURE__*/React.createElement(\"span\", null, children)) : children;\n  var tagNode = /*#__PURE__*/React.createElement(\"span\", _extends({}, tagProps, {\n    ref: ref,\n    className: tagClassName,\n    style: tagStyle\n  }), kids, renderCloseIcon());\n  return isNeedWave ? /*#__PURE__*/React.createElement(Wave, null, tagNode) : tagNode;\n};\n\nvar Tag = /*#__PURE__*/React.forwardRef(InternalTag);\nTag.displayName = 'Tag';\nTag.CheckableTag = CheckableTag;\nexport default Tag;","import produce from '@utils/produce';\r\n\r\nexport const initialState = {\r\n  imagePaths: [],\r\n  addedPostId: null,\r\n  addedCommentId: null,\r\n  hasMorePosts: true,\r\n  likePostLoading: false,\r\n  likePostDone: false,\r\n  likePostError: null,\r\n  dislikePostLoading: false,\r\n  dislikePostDone: false,\r\n  dislikePostError: null,\r\n  addPostLoading: false,\r\n  addPostDone: false,\r\n  addPostError: null,\r\n  removedCommentId: null,\r\n  removePostLoading: false,\r\n  removePostDone: false,\r\n  removePostError: null,\r\n  addCommentLoading: false,\r\n  addCommentDone: false,\r\n  addCommentError: null,\r\n  removeCommentLoading: false,\r\n  removeCommentDone: false,\r\n  removeCommentError: null,\r\n  uploadImagesLoading: false,\r\n  uploadImagesDone: false,\r\n  uploadImagesError: null,\r\n};\r\n\r\nexport const UPLOAD_IMAGES_REQUEST = 'UPLOAD_IMAGES_REQUEST';\r\nexport const UPLOAD_IMAGES_SUCCESS = 'UPLOAD_IMAGES_SUCCESS';\r\nexport const UPLOAD_IMAGES_FAILURE = 'UPLOAD_IMAGES_FAILURE';\r\n\r\nexport const LIKE_POST_REQUEST = 'LIKE_POST_REQUEST';\r\nexport const LIKE_POST_SUCCESS = 'LIKE_POST_SUCCESS';\r\nexport const LIKE_POST_FAILURE = 'LIKE_POST_FAILURE';\r\n\r\nexport const DISLIKE_POST_REQUEST = 'DISLIKE_POST_REQUEST';\r\nexport const DISLIKE_POST_SUCCESS = 'DISLIKE_POST_SUCCESS';\r\nexport const DISLIKE_POST_FAILURE = 'DISLIKE_POST_FAILURE';\r\n\r\nexport const ADD_POST_REQUEST = 'ADD_POST_REQUEST';\r\nexport const ADD_POST_SUCCESS = 'ADD_POST_SUCCESS';\r\nexport const ADD_POST_FAILURE = 'ADD_POST_FAILURE';\r\n\r\nexport const REMOVE_POST_REQUEST = 'REMOVE_POST_REQUEST';\r\nexport const REMOVE_POST_SUCCESS = 'REMOVE_POST_SUCCESS';\r\nexport const REMOVE_POST_FAILURE = 'REMOVE_POST_FAILURE';\r\n\r\nexport const ADD_COMMENT_REQUEST = 'ADD_COMMENT_REQUEST';\r\nexport const ADD_COMMENT_SUCCESS = 'ADD_COMMENT_SUCCESS';\r\nexport const ADD_COMMENT_FAILURE = 'ADD_COMMENT_FAILURE';\r\n\r\nexport const ADD_REPLY_REQUEST = 'ADD_REPLY_REQUEST';\r\nexport const ADD_REPLY_SUCCESS = 'ADD_REPLY_SUCCESS';\r\nexport const ADD_REPLY_FAILURE = 'ADD_REPLY_FAILURE';\r\n\r\nexport const REMOVE_COMMENT_REQUEST = 'REMOVE_COMMENT_REQUEST';\r\nexport const REMOVE_COMMENT_SUCCESS = 'REMOVE_COMMENT_SUCCESS';\r\nexport const REMOVE_COMMENT_FAILURE = 'REMOVE_COMMENT_FAILURE';\r\n\r\nexport const REMOVE_IMAGE = 'REMOVE_IMAGE';\r\n\r\nexport const addPost = (data) => ({\r\n  type: ADD_POST_REQUEST,\r\n  data,\r\n});\r\n\r\nexport const addComment = (data) => ({\r\n  type: ADD_COMMENT_REQUEST,\r\n  data,\r\n});\r\n\r\nconst reducer = (state = initialState, action) => {\r\n  return produce(state, (draft) => {\r\n    switch (action.type) {\r\n      case REMOVE_IMAGE:\r\n        draft.imagePaths = draft.imagePaths.filter((v, i) => i !== action.data);\r\n        break;\r\n\r\n      case UPLOAD_IMAGES_REQUEST:\r\n        draft.uploadImagesLoading = true;\r\n        draft.uploadImagesError = null;\r\n        draft.uploadImagesDone = false;\r\n        break;\r\n\r\n      case UPLOAD_IMAGES_SUCCESS: {\r\n        draft.imagePaths = draft.imagePaths.concat(action.data);\r\n        draft.uploadImagesLoading = false;\r\n        draft.uploadImagesDone = true;\r\n        break;\r\n      }\r\n\r\n      case UPLOAD_IMAGES_FAILURE:\r\n        draft.uploadImagesLoading = false;\r\n        draft.uploadImagesError = action.error;\r\n        break;\r\n\r\n      case LIKE_POST_REQUEST:\r\n        draft.likePostLoading = true;\r\n        draft.likePostError = null;\r\n        draft.likePostDone = false;\r\n        break;\r\n\r\n      case LIKE_POST_SUCCESS: {\r\n        draft.likePostLoading = false;\r\n        draft.likePostDone = true;\r\n        break;\r\n      }\r\n\r\n      case LIKE_POST_FAILURE:\r\n        draft.likePostLoading = false;\r\n        draft.likePostError = action.error;\r\n        break;\r\n\r\n      case DISLIKE_POST_REQUEST:\r\n        draft.dislikePostLoading = true;\r\n        draft.dislikePostError = null;\r\n        draft.dislikePostDone = false;\r\n        break;\r\n\r\n      case DISLIKE_POST_SUCCESS: {\r\n        draft.dislikePostLoading = false;\r\n        draft.dislikePostDone = true;\r\n        break;\r\n      }\r\n\r\n      case DISLIKE_POST_FAILURE:\r\n        draft.dislikePostLoading = false;\r\n        draft.dislikePostError = action.error;\r\n        break;\r\n\r\n      case ADD_POST_REQUEST:\r\n        draft.addPostLoading = true;\r\n        draft.addPostError = null;\r\n        draft.addPostDone = false;\r\n        break;\r\n\r\n      case ADD_POST_SUCCESS:\r\n        draft.addedPostId = action.data.id;\r\n        draft.addPostLoading = false;\r\n        draft.addPostDone = true;\r\n        draft.imagePaths = [];\r\n        break;\r\n\r\n      case ADD_POST_FAILURE:\r\n        draft.addPostLoading = false;\r\n        draft.addPostError = action.error;\r\n        break;\r\n\r\n      case REMOVE_POST_REQUEST:\r\n        draft.removePostLoading = true;\r\n        draft.removePostError = null;\r\n        draft.removePostDone = false;\r\n        break;\r\n\r\n      case REMOVE_POST_SUCCESS:\r\n        draft.removePostLoading = false;\r\n        draft.removePostDone = true;\r\n        break;\r\n\r\n      case REMOVE_POST_FAILURE:\r\n        draft.removePostLoading = false;\r\n        draft.removePostError = action.error;\r\n        break;\r\n\r\n      case ADD_COMMENT_REQUEST:\r\n      case ADD_REPLY_REQUEST:\r\n        draft.addCommentLoading = true;\r\n        draft.addCommentError = null;\r\n        draft.addCommentDone = false;\r\n        break;\r\n\r\n      case ADD_COMMENT_SUCCESS:\r\n      case ADD_REPLY_SUCCESS: {\r\n        draft.addedCommentId = action.data.id;\r\n        draft.addCommentLoading = false;\r\n        draft.addCommentDone = true;\r\n        break;\r\n      }\r\n\r\n      case ADD_COMMENT_FAILURE:\r\n      case ADD_REPLY_FAILURE:\r\n        draft.addCommentLoading = false;\r\n        draft.addCommentError = action.error;\r\n        break;\r\n\r\n      case REMOVE_COMMENT_REQUEST:\r\n        draft.removeCommentLoading = true;\r\n        draft.removeCommentError = null;\r\n        draft.removeCommentDone = false;\r\n        break;\r\n\r\n      case REMOVE_COMMENT_SUCCESS:\r\n        draft.removedCommentId = action.data.id;\r\n        draft.removeCommentLoading = false;\r\n        draft.removeCommentDone = true;\r\n        break;\r\n\r\n      case REMOVE_COMMENT_FAILURE:\r\n        draft.removeCommentLoading = false;\r\n        draft.removeCommentError = action.error;\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n  });\r\n};\r\n\r\nexport default reducer;\r\n","import React, { useState, useCallback, Dispatch, SetStateAction } from 'react';\r\nimport { Input, Tag, Tooltip } from 'antd';\r\nimport { PlusOutlined } from '@ant-design/icons';\r\nimport useInput from '@hooks/useInput';\r\n\r\ninterface Props {\r\n  tags: string[];\r\n  setTags: Dispatch<SetStateAction<string[]>>;\r\n}\r\n\r\nconst TagForm = ({ tags, setTags }: Props) => {\r\n  const [inputVisible, setInputVisible] = useState(false);\r\n  const [editInputIndex, setEditInputIndex] = useState(-1);\r\n  const [inputValue, onChangeInputValue, setInputValue] = useInput('');\r\n  const [editInputValue, onChangeEditInputValue, setEditInputValue] = useInput('');\r\n\r\n  const onClose = useCallback(\r\n    (removedTag) => {\r\n      setTags(tags.filter((tag) => tag !== removedTag));\r\n    },\r\n    [tags],\r\n  );\r\n\r\n  const onBlurEditInput = useCallback(() => {\r\n    const newTags = [...tags];\r\n    newTags[editInputIndex] = editInputValue;\r\n    setTags(newTags);\r\n    setEditInputIndex(-1);\r\n    setEditInputValue('');\r\n  }, [tags, editInputIndex, editInputValue]);\r\n\r\n  const onBlurInput = useCallback(() => {\r\n    if (inputValue && tags.indexOf(inputValue) === -1) {\r\n      setTags([...tags, inputValue]);\r\n    }\r\n    setInputVisible(false);\r\n    setInputValue('');\r\n  }, [inputValue]);\r\n\r\n  const showInput = useCallback(() => {\r\n    setInputVisible(true);\r\n  }, [inputVisible]);\r\n\r\n  return (\r\n    <>\r\n      {tags.map((tag, index) => {\r\n        if (editInputIndex === index) {\r\n          return (\r\n            <Input\r\n              type=\"text\"\r\n              autoFocus\r\n              key={tag}\r\n              size=\"small\"\r\n              value={editInputValue}\r\n              onChange={onChangeEditInputValue}\r\n              onBlur={onBlurEditInput}\r\n              onPressEnter={onBlurEditInput}\r\n              style={{ width: 78 }}\r\n            />\r\n          );\r\n        }\r\n\r\n        const isLongTag = tag.length > 10;\r\n\r\n        const tagElem = (\r\n          <Tag color=\"blue\" key={tag} closable onClose={() => onClose(tag)}>\r\n            <span\r\n              onDoubleClick={(e) => {\r\n                setEditInputIndex(index);\r\n                setEditInputValue(tag);\r\n                e.preventDefault();\r\n              }}\r\n            >\r\n              {isLongTag ? `${tag.slice(0, 10)}...` : tag}\r\n            </span>\r\n          </Tag>\r\n        );\r\n        return isLongTag ? (\r\n          <Tooltip title={tag} key={tag}>\r\n            {tagElem}\r\n          </Tooltip>\r\n        ) : (\r\n          tagElem\r\n        );\r\n      })}\r\n      {inputVisible ? (\r\n        <Input\r\n          autoFocus\r\n          type=\"text\"\r\n          size=\"small\"\r\n          value={inputValue}\r\n          onChange={onChangeInputValue}\r\n          onBlur={onBlurInput}\r\n          onPressEnter={onBlurInput}\r\n          style={{ width: 78 }}\r\n        />\r\n      ) : (\r\n        <Tag color=\"blue\" onClick={showInput}>\r\n          <PlusOutlined />\r\n          {' 추가'}\r\n        </Tag>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default TagForm;\r\n","import React, { useEffect, useCallback, useState } from 'react';\r\nimport { Col, Form, Input, Button, Typography, Upload, message, Modal, Row } from 'antd';\r\n// @ts-ignore\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport Router from 'next/router';\r\nimport { PlusOutlined } from '@ant-design/icons';\r\nimport useSWR from 'swr';\r\nimport useInput from '@hooks/useInput';\r\nimport AppLayout from '@components/AppLayout';\r\nimport TagForm from '@components/TagForm';\r\nimport { fetcher } from '@utils/fetcher';\r\nimport ExpiredValidation from '@components/ExpiredValidation';\r\nimport { UPLOAD_IMAGES_REQUEST, ADD_POST_REQUEST, REMOVE_IMAGE } from '../reducers/post';\r\n\r\n// const { Option } = Select;\r\nconst { Paragraph } = Typography;\r\nconst { TextArea } = Input;\r\n\r\nfunction getBase64(file: Blob) {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => resolve(reader.result);\r\n    reader.onerror = (error) => reject(error);\r\n  });\r\n}\r\n\r\nconst upload = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const { data: userData } = useSWR('/api/user', fetcher);\r\n  // @ts-ignore\r\n  const { imagePaths, addedPostId } = useSelector((state) => state.post);\r\n\r\n  useEffect(() => {\r\n    if (!userData) {\r\n      Router.replace('/login');\r\n    }\r\n  }, [userData]);\r\n\r\n  useEffect(() => {\r\n    if (addedPostId) {\r\n      Router.replace(`/illustration/${addedPostId}`);\r\n    }\r\n  }, [addedPostId]);\r\n\r\n  const [title, onChangeTitle] = useInput('');\r\n  const [caption, onChangeCaption] = useInput('');\r\n  const [tags, setTags] = useState<string[]>([]);\r\n  const [fileList, setFileList] = useState([]);\r\n  const [fileSize, setFileSize] = useState(0);\r\n  const [previewImage, setPreviewImage] = useState('');\r\n  const [previewTitle, setPreviewTitle] = useState('');\r\n  const [previewVisible, setPreviewVisible] = useState(false);\r\n\r\n  const onCancel = useCallback(() => {\r\n    setPreviewVisible(false);\r\n  }, []);\r\n\r\n  const onPreview = useCallback(async (file) => {\r\n    console.log(file.originFileObj);\r\n    if (!file.url && !file.preview) {\r\n      file.preview = await getBase64(file.originFileObj);\r\n    }\r\n    setPreviewImage(file.url || file.preview);\r\n    setPreviewVisible(true);\r\n    setPreviewTitle(file.name || file.url.substring(file.url.lastIndexOf('/') + 1));\r\n    console.log(file);\r\n  }, []);\r\n\r\n  const onChangeFileList = useCallback(({ fileList: newFileList }) => {\r\n    console.log(newFileList);\r\n    setFileList(newFileList);\r\n    const fileSizes = newFileList.map((file: Blob) => file.size);\r\n    setFileSize(Math.round((fileSizes.reduce((p: number, c: number) => p + c, 0) / 1024 / 1024) * 100) / 100);\r\n  }, []);\r\n\r\n  const onRemoveFile = useCallback(\r\n    (file) => {\r\n      const fileIndex = fileList.findIndex((v) => v === file);\r\n      console.log(fileIndex);\r\n      dispatch({\r\n        type: REMOVE_IMAGE,\r\n        data: fileIndex,\r\n      });\r\n    },\r\n    [fileList],\r\n  );\r\n\r\n  const beforeUpload = useCallback((file) => {\r\n    if (file.type !== 'image/jpg' && file.type !== 'image/jpeg' && file.type !== 'image/png') {\r\n      message.error('jpg jpeg png 사진만 가능해요!');\r\n      return false;\r\n    }\r\n    if (file.size > 10 * 1024 * 1024) {\r\n      message.error('이미지는 10MB 이하만 가능해요!');\r\n      return false;\r\n    }\r\n    const imageFormData = new FormData();\r\n    imageFormData.append('image', file);\r\n\r\n    dispatch({\r\n      type: UPLOAD_IMAGES_REQUEST,\r\n      data: imageFormData,\r\n    });\r\n\r\n    return true;\r\n  }, []);\r\n\r\n  const onFinish = useCallback(() => {\r\n    console.log({ title, caption, tags, imagePaths });\r\n\r\n    dispatch({\r\n      type: ADD_POST_REQUEST,\r\n      data: {\r\n        title,\r\n        caption,\r\n        tags,\r\n        imagePaths,\r\n      },\r\n    });\r\n    // Router.replace(`/illustration/${addedPostId}`)\r\n  }, [title, caption, tags, imagePaths]);\r\n\r\n  const uploadButton = (\r\n    <div>\r\n      <PlusOutlined />\r\n      <div style={{ marginTop: 8 }}>업로드</div>\r\n    </div>\r\n  );\r\n\r\n  if (userData?.status === 'pending') {\r\n    return <ExpiredValidation />;\r\n  }\r\n\r\n  return (\r\n    <AppLayout>\r\n      <Row justify=\"center\" gutter={16}>\r\n        <Col span={12}>\r\n          <Form onFinish={onFinish}>\r\n            <Form.Item>\r\n              <Paragraph>JPG JPEG GIF PNG</Paragraph>\r\n              <Paragraph>1장당 10MB 이내, 최대 20장 업로드</Paragraph>\r\n              <Paragraph>{`${fileList.length}장 ${fileSize}MB`}</Paragraph>\r\n              <Upload\r\n                name=\"image\"\r\n                accept=\".jpg,.jpeg,.png,.gif\"\r\n                multiple\r\n                maxCount={20}\r\n                beforeUpload={beforeUpload}\r\n                onPreview={onPreview}\r\n                onChange={onChangeFileList}\r\n                listType=\"picture-card\"\r\n                fileList={fileList}\r\n                onRemove={onRemoveFile}\r\n              >\r\n                {fileList.length >= 20 ? null : uploadButton}\r\n              </Upload>\r\n              <Modal visible={previewVisible} title={previewTitle} footer={null} onCancel={onCancel}>\r\n                <img alt=\"example\" style={{ width: '100%' }} src={previewImage} />\r\n              </Modal>\r\n            </Form.Item>\r\n            <Form.Item>\r\n              <Input type=\"text\" value={title} onChange={onChangeTitle} placeholder=\"타이틀\" />\r\n            </Form.Item>\r\n            <Form.Item>\r\n              <TextArea rows={5} placeholder=\"캡션\" value={caption} onChange={onChangeCaption} />\r\n            </Form.Item>\r\n            <Form.Item>\r\n              <TagForm tags={tags} setTags={setTags} />\r\n            </Form.Item>\r\n            {/* <Form.Item>\r\n          <Select defaultValue=\"public\" value>\r\n            <Option value=\"public\">전체 공개</Option>\r\n            <Option value=\"my\" disabled>\r\n              마이픽 공개\r\n            </Option>\r\n            <Option value=\"private\">비공개</Option>\r\n          </Select>\r\n        </Form.Item> */}\r\n            <Form.Item>\r\n              <Paragraph>아래에 해당하는 작품의 업로드를 금지합니다. 업로드하시기 전에 확인해주세요.</Paragraph>\r\n              <Paragraph>\r\n                타인이 제작한 작품, 시판되는 상품의 이미지, 제삼자가 권리를 소유한 이미지, 게임 및 영상 작품의 캡처,\r\n                스크린숏 이미지가 포함된 작품.\r\n              </Paragraph>\r\n              <Paragraph>위와 같은 이미지를 유용하여, 처음부터 모든 것을 본인이 직접 그리지 않은 작품.</Paragraph>\r\n              <Paragraph>작품 이외의 피사체를 찍은 사진 이미지.</Paragraph>\r\n              <Paragraph>\r\n                이용약관에 위반하는 작품의 투고 유저는 투고 작품 공개 정지, 계정 정지의 대상이 됩니다.\r\n              </Paragraph>\r\n            </Form.Item>\r\n            <Form.Item>\r\n              <Button type=\"primary\" htmlType=\"submit\">\r\n                업로드하기\r\n              </Button>\r\n            </Form.Item>\r\n          </Form>\r\n        </Col>\r\n      </Row>\r\n    </AppLayout>\r\n  );\r\n};\r\n\r\nexport default upload;\r\n","// This icon file is generated automatically.\nvar PlusOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"defs\", \"attrs\": {}, \"children\": [{ \"tag\": \"style\", \"attrs\": {} }] }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z\" } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z\" } }] }, \"name\": \"plus\", \"theme\": \"outlined\" };\nexport default PlusOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport PlusOutlinedSvg from \"@ant-design/icons-svg/es/asn/PlusOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar PlusOutlined = function PlusOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: PlusOutlinedSvg\n  }));\n};\n\nPlusOutlined.displayName = 'PlusOutlined';\nexport default /*#__PURE__*/React.forwardRef(PlusOutlined);"],"sourceRoot":""}