_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[28],{YzDJ:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/upload",function(){return n("rnAd")}])},mr32:function(e,t,n){"use strict";var a=n("rePB"),r=n("wx14"),o=n("ODXe"),c=n("q1tI"),s=n("TSYQ"),i=n.n(s),l=n("bT9E"),d=n("4i/N"),u=n("H84U"),b=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},m=function(e){var t,n=e.prefixCls,o=e.className,s=e.checked,l=e.onChange,d=e.onClick,m=b(e,["prefixCls","className","checked","onChange","onClick"]),j=(0,c.useContext(u.b).getPrefixCls)("tag",n),O=i()(j,(t={},Object(a.a)(t,"".concat(j,"-checkable"),!0),Object(a.a)(t,"".concat(j,"-checkable-checked"),s),t),o);return c.createElement("span",Object(r.a)({},m,{className:O,onClick:function(e){l&&l(!s),d&&d(e)}}))},j=n("09Wf"),O=n("g0mS"),f=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},g=new RegExp("^(".concat(j.a.join("|"),")(-inverse)?$")),p=new RegExp("^(".concat(j.b.join("|"),")$")),E=function(e,t){var n,s=e.prefixCls,b=e.className,m=e.style,j=e.children,E=e.icon,P=e.color,h=e.onClose,C=e.closeIcon,v=e.closable,k=void 0!==v&&v,x=f(e,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),S=c.useContext(u.b),_=S.getPrefixCls,I=S.direction,D=c.useState(!0),L=Object(o.a)(D,2),y=L[0],w=L[1];c.useEffect((function(){"visible"in x&&w(x.visible)}),[x.visible]);var T=function(){return!!P&&(g.test(P)||p.test(P))},R=Object(r.a)({backgroundColor:P&&!T()?P:void 0},m),M=T(),U=_("tag",s),A=i()(U,(n={},Object(a.a)(n,"".concat(U,"-").concat(P),M),Object(a.a)(n,"".concat(U,"-has-color"),P&&!M),Object(a.a)(n,"".concat(U,"-hidden"),!y),Object(a.a)(n,"".concat(U,"-rtl"),"rtl"===I),n),b),N=function(e){e.stopPropagation(),h&&h(e),e.defaultPrevented||"visible"in x||w(!1)},F="onClick"in x||j&&"a"===j.type,q=Object(l.a)(x,["visible"]),K=E||null,z=K?c.createElement(c.Fragment,null,K,c.createElement("span",null,j)):j,V=c.createElement("span",Object(r.a)({},q,{ref:t,className:A,style:R}),z,k?C?c.createElement("span",{className:"".concat(U,"-close-icon"),onClick:N},C):c.createElement(d.a,{className:"".concat(U,"-close-icon"),onClick:N}):null);return F?c.createElement(O.a,null,V):V},P=c.forwardRef(E);P.displayName="Tag",P.CheckableTag=m;t.a=P},"p+NB":function(e,t,n){"use strict";n.d(t,"x",(function(){return o})),n.d(t,"y",(function(){return c})),n.d(t,"w",(function(){return s})),n.d(t,"n",(function(){return i})),n.d(t,"o",(function(){return l})),n.d(t,"m",(function(){return d})),n.d(t,"k",(function(){return u})),n.d(t,"l",(function(){return b})),n.d(t,"j",(function(){return m})),n.d(t,"e",(function(){return j})),n.d(t,"f",(function(){return O})),n.d(t,"d",(function(){return f})),n.d(t,"u",(function(){return g})),n.d(t,"v",(function(){return p})),n.d(t,"t",(function(){return E})),n.d(t,"b",(function(){return P})),n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return C})),n.d(t,"h",(function(){return v})),n.d(t,"i",(function(){return k})),n.d(t,"g",(function(){return x})),n.d(t,"q",(function(){return S})),n.d(t,"r",(function(){return _})),n.d(t,"p",(function(){return I})),n.d(t,"s",(function(){return D}));var a=n("Ibkh"),r={imagePaths:[],addedPostId:null,addedCommentId:null,hasMorePosts:!0,likePostLoading:!1,likePostDone:!1,likePostError:null,dislikePostLoading:!1,dislikePostDone:!1,dislikePostError:null,addPostLoading:!1,addPostDone:!1,addPostError:null,removedCommentId:null,removePostLoading:!1,removePostDone:!1,removePostError:null,addCommentLoading:!1,addCommentDone:!1,addCommentError:null,removeCommentLoading:!1,removeCommentDone:!1,removeCommentError:null,uploadImagesLoading:!1,uploadImagesDone:!1,uploadImagesError:null},o="UPLOAD_IMAGES_REQUEST",c="UPLOAD_IMAGES_SUCCESS",s="UPLOAD_IMAGES_FAILURE",i="LIKE_POST_REQUEST",l="LIKE_POST_SUCCESS",d="LIKE_POST_FAILURE",u="DISLIKE_POST_REQUEST",b="DISLIKE_POST_SUCCESS",m="DISLIKE_POST_FAILURE",j="ADD_POST_REQUEST",O="ADD_POST_SUCCESS",f="ADD_POST_FAILURE",g="REMOVE_POST_REQUEST",p="REMOVE_POST_SUCCESS",E="REMOVE_POST_FAILURE",P="ADD_COMMENT_REQUEST",h="ADD_COMMENT_SUCCESS",C="ADD_COMMENT_FAILURE",v="ADD_REPLY_REQUEST",k="ADD_REPLY_SUCCESS",x="ADD_REPLY_FAILURE",S="REMOVE_COMMENT_REQUEST",_="REMOVE_COMMENT_SUCCESS",I="REMOVE_COMMENT_FAILURE",D="REMOVE_IMAGE";t.z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments.length>1?arguments[1]:void 0;return Object(a.a)(e,(function(e){switch(t.type){case D:e.imagePaths=e.imagePaths.filter((function(e,n){return n!==t.data}));break;case o:e.uploadImagesLoading=!0,e.uploadImagesError=null,e.uploadImagesDone=!1;break;case c:e.imagePaths=e.imagePaths.concat(t.data),e.uploadImagesLoading=!1,e.uploadImagesDone=!0;break;case s:e.uploadImagesLoading=!1,e.uploadImagesError=t.error;break;case i:e.likePostLoading=!0,e.likePostError=null,e.likePostDone=!1;break;case l:e.likePostLoading=!1,e.likePostDone=!0;break;case d:e.likePostLoading=!1,e.likePostError=t.error;break;case u:e.dislikePostLoading=!0,e.dislikePostError=null,e.dislikePostDone=!1;break;case b:e.dislikePostLoading=!1,e.dislikePostDone=!0;break;case m:e.dislikePostLoading=!1,e.dislikePostError=t.error;break;case j:e.addPostLoading=!0,e.addPostError=null,e.addPostDone=!1;break;case O:e.addedPostId=t.data.id,e.addPostLoading=!1,e.addPostDone=!0,e.imagePaths=[];break;case f:e.addPostLoading=!1,e.addPostError=t.error;break;case g:e.removePostLoading=!0,e.removePostError=null,e.removePostDone=!1;break;case p:e.removePostLoading=!1,e.removePostDone=!0;break;case E:e.removePostLoading=!1,e.removePostError=t.error;break;case P:case v:e.addCommentLoading=!0,e.addCommentError=null,e.addCommentDone=!1;break;case h:case k:e.addedCommentId=t.data.id,e.addCommentLoading=!1,e.addCommentDone=!0;break;case C:case x:e.addCommentLoading=!1,e.addCommentError=t.error;break;case S:e.removeCommentLoading=!0,e.removeCommentError=null,e.removeCommentDone=!1;break;case _:e.removedCommentId=t.data.id,e.removeCommentLoading=!1,e.removeCommentDone=!0;break;case I:e.removeCommentLoading=!1,e.removeCommentError=t.error}}))}},rnAd:function(e,t,n){"use strict";n.r(t);var a=n("nKUr"),r=n("o0o1"),o=n.n(r),c=n("HaE+"),s=n("ODXe"),i=n("q1tI"),l=n("wFql"),d=n("5rEg"),u=n("tsqr"),b=n("BMrR"),m=n("kPKH"),j=n("Vl3Y"),O=n("8z0m"),f=n("kLXV"),g=n("2/Rp"),p=n("/MKj"),E=n("20a2"),P=n.n(E),h=n("xvlK"),C=n("VtrM"),v=n("QivM"),k=n("4I7n"),x=n("KQm4"),S=n("mr32"),_=n("3S7+"),I=function(e){var t=e.tags,n=e.setTags,r=Object(i.useState)(!1),o=r[0],c=r[1],l=Object(i.useState)(-1),u=l[0],b=l[1],m=Object(v.a)(""),j=Object(s.a)(m,3),O=j[0],f=j[1],g=j[2],p=Object(v.a)(""),E=Object(s.a)(p,3),P=E[0],C=E[1],k=E[2],I=Object(i.useCallback)((function(e){n(t.filter((function(t){return t!==e})))}),[t]),D=Object(i.useCallback)((function(){var e=Object(x.a)(t);e[u]=P,n(e),b(-1),k("")}),[t,u,P]),L=Object(i.useCallback)((function(){O&&-1===t.indexOf(O)&&n([].concat(Object(x.a)(t),[O])),c(!1),g("")}),[O]),y=Object(i.useCallback)((function(){c(!0)}),[o]);return Object(a.jsxs)(a.Fragment,{children:[t.map((function(e,t){if(u===t)return Object(a.jsx)(d.a,{type:"text",autoFocus:!0,size:"small",value:P,onChange:C,onBlur:D,onPressEnter:D,style:{width:78}},e);var n=e.length>10,r=Object(a.jsx)(S.a,{color:"blue",closable:!0,onClose:function(){return I(e)},children:Object(a.jsx)("span",{onDoubleClick:function(n){b(t),k(e),n.preventDefault()},children:n?"".concat(e.slice(0,10),"..."):e})},e);return n?Object(a.jsx)(_.a,{title:e,children:r},e):r})),o?Object(a.jsx)(d.a,{autoFocus:!0,type:"text",size:"small",value:O,onChange:f,onBlur:L,onPressEnter:L,style:{width:78}}):Object(a.jsxs)(S.a,{color:"blue",onClick:y,children:[Object(a.jsx)(h.a,{})," \ucd94\uac00"]})]})},D=n("dfzq"),L=n("Kwez"),y=n("p+NB"),w=l.a.Paragraph,T=d.a.TextArea;function R(e){return new Promise((function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return t(a.result)},a.onerror=function(e){return n(e)}}))}t.default=function(){var e=Object(p.b)(),t=Object(C.a)("/api/user",D.a).data,n=Object(p.c)((function(e){return e.post})),r=n.imagePaths,l=n.addedPostId;Object(i.useEffect)((function(){t||P.a.replace("/login")}),[t]),Object(i.useEffect)((function(){l&&P.a.replace("/illustration/".concat(l))}),[l]);var E=Object(v.a)(""),x=Object(s.a)(E,2),S=x[0],_=x[1],M=Object(v.a)(""),U=Object(s.a)(M,2),A=U[0],N=U[1],F=Object(i.useState)([]),q=F[0],K=F[1],z=Object(i.useState)([]),V=z[0],B=z[1],Q=Object(i.useState)(0),G=Q[0],Y=Q[1],J=Object(i.useState)(""),X=J[0],H=J[1],$=Object(i.useState)(""),W=$[0],Z=$[1],ee=Object(i.useState)(!1),te=ee[0],ne=ee[1],ae=Object(i.useCallback)((function(){ne(!1)}),[]),re=Object(i.useCallback)(function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t.originFileObj),t.url||t.preview){e.next=5;break}return e.next=4,R(t.originFileObj);case 4:t.preview=e.sent;case 5:H(t.url||t.preview),ne(!0),Z(t.name||t.url.substring(t.url.lastIndexOf("/")+1)),console.log(t);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),oe=Object(i.useCallback)((function(e){var t=e.fileList;console.log(t),B(t);var n=t.map((function(e){return e.size}));Y(Math.round(n.reduce((function(e,t){return e+t}),0)/1024/1024*100)/100)}),[]),ce=Object(i.useCallback)((function(t){var n=V.findIndex((function(e){return e===t}));console.log(n),e({type:y.s,data:n})}),[V]),se=Object(i.useCallback)((function(t){if("image/jpg"!==t.type&&"image/jpeg"!==t.type&&"image/png"!==t.type)return u.b.error("jpg jpeg png \uc0ac\uc9c4\ub9cc \uac00\ub2a5\ud574\uc694!"),!1;if(t.size>10485760)return u.b.error("\uc774\ubbf8\uc9c0\ub294 10MB \uc774\ud558\ub9cc \uac00\ub2a5\ud574\uc694!"),!1;var n=new FormData;return n.append("image",t),e({type:y.x,data:n}),!0}),[]),ie=Object(i.useCallback)((function(){console.log({title:S,caption:A,tags:q,imagePaths:r}),e({type:y.e,data:{title:S,caption:A,tags:q,imagePaths:r}})}),[S,A,q,r]),le=Object(a.jsxs)("div",{children:[Object(a.jsx)(h.a,{}),Object(a.jsx)("div",{style:{marginTop:8},children:"\uc5c5\ub85c\ub4dc"})]});return"pending"===(null===t||void 0===t?void 0:t.status)?Object(a.jsx)(L.a,{}):Object(a.jsx)(k.a,{children:Object(a.jsx)(b.a,{justify:"center",gutter:16,children:Object(a.jsx)(m.a,{span:12,children:Object(a.jsxs)(j.a,{onFinish:ie,children:[Object(a.jsxs)(j.a.Item,{children:[Object(a.jsx)(w,{children:"JPG JPEG GIF PNG"}),Object(a.jsx)(w,{children:"1\uc7a5\ub2f9 10MB \uc774\ub0b4, \ucd5c\ub300 20\uc7a5 \uc5c5\ub85c\ub4dc"}),Object(a.jsx)(w,{children:"".concat(V.length,"\uc7a5 ").concat(G,"MB")}),Object(a.jsx)(O.a,{name:"image",accept:".jpg,.jpeg,.png,.gif",multiple:!0,maxCount:20,beforeUpload:se,onPreview:re,onChange:oe,listType:"picture-card",fileList:V,onRemove:ce,children:V.length>=20?null:le}),Object(a.jsx)(f.a,{visible:te,title:W,footer:null,onCancel:ae,children:Object(a.jsx)("img",{alt:"example",style:{width:"100%"},src:X})})]}),Object(a.jsx)(j.a.Item,{children:Object(a.jsx)(d.a,{type:"text",value:S,onChange:_,placeholder:"\ud0c0\uc774\ud2c0"})}),Object(a.jsx)(j.a.Item,{children:Object(a.jsx)(T,{rows:5,placeholder:"\ucea1\uc158",value:A,onChange:N})}),Object(a.jsx)(j.a.Item,{children:Object(a.jsx)(I,{tags:q,setTags:K})}),Object(a.jsxs)(j.a.Item,{children:[Object(a.jsx)(w,{children:"\uc544\ub798\uc5d0 \ud574\ub2f9\ud558\ub294 \uc791\ud488\uc758 \uc5c5\ub85c\ub4dc\ub97c \uae08\uc9c0\ud569\ub2c8\ub2e4. \uc5c5\ub85c\ub4dc\ud558\uc2dc\uae30 \uc804\uc5d0 \ud655\uc778\ud574\uc8fc\uc138\uc694."}),Object(a.jsx)(w,{children:"\ud0c0\uc778\uc774 \uc81c\uc791\ud55c \uc791\ud488, \uc2dc\ud310\ub418\ub294 \uc0c1\ud488\uc758 \uc774\ubbf8\uc9c0, \uc81c\uc0bc\uc790\uac00 \uad8c\ub9ac\ub97c \uc18c\uc720\ud55c \uc774\ubbf8\uc9c0, \uac8c\uc784 \ubc0f \uc601\uc0c1 \uc791\ud488\uc758 \ucea1\ucc98, \uc2a4\ud06c\ub9b0\uc20f \uc774\ubbf8\uc9c0\uac00 \ud3ec\ud568\ub41c \uc791\ud488."}),Object(a.jsx)(w,{children:"\uc704\uc640 \uac19\uc740 \uc774\ubbf8\uc9c0\ub97c \uc720\uc6a9\ud558\uc5ec, \ucc98\uc74c\ubd80\ud130 \ubaa8\ub4e0 \uac83\uc744 \ubcf8\uc778\uc774 \uc9c1\uc811 \uadf8\ub9ac\uc9c0 \uc54a\uc740 \uc791\ud488."}),Object(a.jsx)(w,{children:"\uc791\ud488 \uc774\uc678\uc758 \ud53c\uc0ac\uccb4\ub97c \ucc0d\uc740 \uc0ac\uc9c4 \uc774\ubbf8\uc9c0."}),Object(a.jsx)(w,{children:"\uc774\uc6a9\uc57d\uad00\uc5d0 \uc704\ubc18\ud558\ub294 \uc791\ud488\uc758 \ud22c\uace0 \uc720\uc800\ub294 \ud22c\uace0 \uc791\ud488 \uacf5\uac1c \uc815\uc9c0, \uacc4\uc815 \uc815\uc9c0\uc758 \ub300\uc0c1\uc774 \ub429\ub2c8\ub2e4."})]}),Object(a.jsx)(j.a.Item,{children:Object(a.jsx)(g.a,{type:"primary",htmlType:"submit",children:"\uc5c5\ub85c\ub4dc\ud558\uae30"})})]})})})})}},xvlK:function(e,t,n){"use strict";var a=n("q1tI"),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},o=n("6VBw"),c=function(e,t){return a.createElement(o.a,Object.assign({},e,{ref:t,icon:r}))};c.displayName="PlusOutlined";t.a=a.forwardRef(c)}},[["YzDJ",1,2,0,3,6,4,5,8,7,9,10,11,13]]]);