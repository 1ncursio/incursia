{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useEffect } from 'react';\nimport { Col, Row, List, Typography, Space } from 'antd';\nimport { useRouter } from 'next/router';\nimport useSWR from 'swr';\nimport Link from 'next/link';\nimport AppLayout from '@components/AppLayout';\nimport { fetcher } from '@utils/fetcher';\nimport UserPageMenu from '@components/UserPageMenu';\nimport UserPageProfile from '@components/UserPageProfile';\nimport UserAvatar from '@components/UserAvatar';\nimport ExpiredValidation from '@components/ExpiredValidation';\nimport { MenuHeaderWrapper, MenuHeader } from '@pages/user/[id]/style';\nvar Text = Typography.Text;\n\nvar UserFollowings = function UserFollowings(_ref) {\n  var initialUser = _ref.user,\n      initialFollowings = _ref.followings;\n  var router = useRouter();\n  var id = router.query.id;\n\n  var _useSWR = useSWR(\"/api/user/\".concat(id), fetcher, {\n    initialData: initialUser\n  }),\n      userData = _useSWR.data;\n\n  var _useSWR2 = useSWR(\"/api/user/\".concat(id, \"/followings\"), fetcher, {\n    initialData: initialFollowings\n  }),\n      followingsData = _useSWR2.data;\n\n  useEffect(function () {\n    if (followingsData) console.log(followingsData);\n  }, [followingsData]);\n\n  if ((userData === null || userData === void 0 ? void 0 : userData.status) === 'pending') {\n    return /*#__PURE__*/_jsx(ExpiredValidation, {});\n  }\n\n  return /*#__PURE__*/_jsx(AppLayout, {\n    children: /*#__PURE__*/_jsx(Row, {\n      justify: \"center\",\n      gutter: 16,\n      children: /*#__PURE__*/_jsxs(Col, {\n        span: 18,\n        children: [/*#__PURE__*/_jsx(UserPageProfile, {\n          userData: userData\n        }), id && /*#__PURE__*/_jsx(UserPageMenu, {\n          current: \"followings\",\n          userId: parseInt(id, 10)\n        }), /*#__PURE__*/_jsx(MenuHeaderWrapper, {\n          children: /*#__PURE__*/_jsx(MenuHeader, {\n            children: \"\".concat(followingsData.length, \"\\uBA85 \\uD314\\uB85C\\uC6B0 \\uC911\")\n          })\n        }), /*#__PURE__*/_jsx(Row, {\n          gutter: 8,\n          children: /*#__PURE__*/_jsx(List, {\n            dataSource: followingsData,\n            renderItem: function renderItem(item) {\n              return /*#__PURE__*/_jsx(List.Item, {\n                children: /*#__PURE__*/_jsxs(Space, {\n                  size: \"large\",\n                  children: [/*#__PURE__*/_jsx(Link, {\n                    href: \"/user/\".concat(item.id, \"/illustration\"),\n                    children: /*#__PURE__*/_jsx(\"a\", {\n                      children: /*#__PURE__*/_jsx(UserAvatar, {\n                        userData: item,\n                        marginRight: 8,\n                        size: \"large\"\n                      })\n                    })\n                  }), item.introduction.length >= 50 ? /*#__PURE__*/_jsx(Text, {\n                    type: \"secondary\",\n                    children: \"\".concat(item.introduction.slice(0, 50), \"...\")\n                  }) : /*#__PURE__*/_jsx(Text, {\n                    type: \"secondary\",\n                    children: item.introduction\n                  })]\n                })\n              });\n            }\n          })\n        })]\n      })\n    })\n  });\n};\n\nexport var __N_SSP = true;\nexport default UserFollowings;","map":{"version":3,"sources":["C:/programming/nodejs/utopia/client/pages/user/[id]/followings.tsx"],"names":["React","useEffect","Col","Row","List","Typography","Space","useRouter","useSWR","Link","AppLayout","fetcher","UserPageMenu","UserPageProfile","UserAvatar","ExpiredValidation","MenuHeaderWrapper","MenuHeader","Text","UserFollowings","initialUser","user","initialFollowings","followings","router","id","query","initialData","userData","data","followingsData","console","log","status","parseInt","length","item","introduction","slice"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\r\nimport { Col, Row, List, Typography, Space } from 'antd';\r\nimport { useRouter } from 'next/router';\r\nimport useSWR from 'swr';\r\nimport Link from 'next/link';\r\nimport AppLayout from '@components/AppLayout';\r\nimport { fetcher } from '@utils/fetcher';\r\nimport UserPageMenu from '@components/UserPageMenu';\r\nimport UserPageProfile from '@components/UserPageProfile';\r\nimport UserAvatar from '@components/UserAvatar';\r\nimport { IUser } from '@typings/IUser';\r\nimport ExpiredValidation from '@components/ExpiredValidation';\r\nimport { MenuHeaderWrapper, MenuHeader } from '@pages/user/[id]/style';\r\nimport wrapper from '../../../store/configureStore';\r\n\r\nconst { Text } = Typography;\r\n\r\ninterface Props {\r\n  user: IUser;\r\n  followings: IUser[];\r\n}\r\n\r\nconst UserFollowings = ({ user: initialUser, followings: initialFollowings }: Props) => {\r\n  const router = useRouter();\r\n\r\n  const { id }: { id?: string } = router.query;\r\n\r\n  const { data: userData } = useSWR(`/api/user/${id}`, fetcher, { initialData: initialUser });\r\n  const { data: followingsData } = useSWR(`/api/user/${id}/followings`, fetcher, { initialData: initialFollowings });\r\n\r\n  useEffect(() => {\r\n    if (followingsData) console.log(followingsData);\r\n  }, [followingsData]);\r\n\r\n  if (userData?.status === 'pending') {\r\n    return <ExpiredValidation />;\r\n  }\r\n\r\n  return (\r\n    <AppLayout>\r\n      <Row justify=\"center\" gutter={16}>\r\n        <Col span={18}>\r\n          <UserPageProfile userData={userData} />\r\n          {id && <UserPageMenu current=\"followings\" userId={parseInt(id, 10)} />}\r\n          <MenuHeaderWrapper>\r\n            <MenuHeader>{`${followingsData.length}명 팔로우 중`}</MenuHeader>\r\n          </MenuHeaderWrapper>\r\n          <Row gutter={8}>\r\n            <List\r\n              dataSource={followingsData}\r\n              renderItem={(item: IUser) => (\r\n                <List.Item>\r\n                  <Space size=\"large\">\r\n                    <Link href={`/user/${item.id}/illustration`}>\r\n                      <a>\r\n                        <UserAvatar userData={item} marginRight={8} size=\"large\" />\r\n                      </a>\r\n                    </Link>\r\n                    {item.introduction.length >= 50 ? (\r\n                      <Text type=\"secondary\">{`${item.introduction.slice(0, 50)}...`}</Text>\r\n                    ) : (\r\n                      <Text type=\"secondary\">{item.introduction}</Text>\r\n                    )}\r\n                  </Space>\r\n                </List.Item>\r\n              )}\r\n            />\r\n          </Row>\r\n        </Col>\r\n      </Row>\r\n    </AppLayout>\r\n  );\r\n};\r\n\r\nexport const getServerSideProps = wrapper.getServerSideProps(async (context) => {\r\n  const user = await fetcher(`/api/user/${context.params?.id}`);\r\n  const followings = await fetcher(`/api/user/${context.params?.id}/followings`);\r\n  return { props: { user, followings } };\r\n});\r\n\r\nexport default UserFollowings;\r\n"]},"metadata":{},"sourceType":"module"}