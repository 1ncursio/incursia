{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useCallback, useEffect } from 'react';\nimport { Dropdown, Avatar, Menu, Typography } from 'antd';\nimport { DownOutlined, LogoutOutlined } from '@ant-design/icons'; // @ts-ignore\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport Link from 'next/link';\nimport useSWR from 'swr';\nimport { fetcher } from '@utils/fetcher';\nimport { logoutRequestAction } from '../reducers/user';\nimport UserAvatar from './UserAvatar';\nconst {\n  Text\n} = Typography;\n\nconst DropdownUser = () => {\n  const dispatch = useDispatch();\n  const {\n    logOutDone,\n    logInDone\n  } = useSelector(state => state.user);\n  const {\n    data: userData,\n    mutate\n  } = useSWR('/api/user', fetcher);\n  useEffect(() => {\n    if (logOutDone) {\n      mutate(null, false);\n    }\n  }, [logOutDone]);\n  useEffect(() => {\n    if (logInDone) {\n      mutate(userData, false);\n    }\n  }, [logInDone]);\n  const onLogout = useCallback(() => {\n    dispatch(logoutRequestAction());\n  }, []);\n\n  const menu = /*#__PURE__*/_jsxs(Menu, {\n    children: [/*#__PURE__*/_jsxs(Menu.Item, {\n      disabled: true,\n      style: {\n        cursor: 'default'\n      },\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsx(Link, {\n          href: `/user/${userData === null || userData === void 0 ? void 0 : userData.id}/illustration`,\n          children: /*#__PURE__*/_jsx(\"a\", {\n            children: /*#__PURE__*/_jsx(Avatar, {\n              src: userData !== null && userData !== void 0 && userData.profile ? `http://localhost:3100/${userData === null || userData === void 0 ? void 0 : userData.profile}` : null,\n              size: 64,\n              children: userData !== null && userData !== void 0 && userData.profile ? null : userData === null || userData === void 0 ? void 0 : userData.nickname[0]\n            })\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsx(Link, {\n          href: `/user/${userData === null || userData === void 0 ? void 0 : userData.id}/illustration`,\n          children: /*#__PURE__*/_jsx(\"a\", {\n            children: /*#__PURE__*/_jsx(Text, {\n              strong: true,\n              children: userData === null || userData === void 0 ? void 0 : userData.nickname\n            })\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsx(Text, {\n          type: \"secondary\",\n          children: userData === null || userData === void 0 ? void 0 : userData.email\n        })\n      })]\n    }), /*#__PURE__*/_jsx(Menu.Item, {\n      children: /*#__PURE__*/_jsx(Link, {\n        href: `/user/${userData === null || userData === void 0 ? void 0 : userData.id}/followings`,\n        children: /*#__PURE__*/_jsx(\"a\", {\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            children: [/*#__PURE__*/_jsx(Text, {\n              type: \"secondary\",\n              children: \"\\uD314\\uB85C\\uC789\"\n            }), /*#__PURE__*/_jsx(Text, {\n              style: {\n                float: 'right'\n              },\n              children: userData === null || userData === void 0 ? void 0 : userData.Followings.length\n            })]\n          })\n        })\n      })\n    }), /*#__PURE__*/_jsx(Menu.Item, {\n      children: /*#__PURE__*/_jsx(Link, {\n        href: `/user/${userData === null || userData === void 0 ? void 0 : userData.id}/followers`,\n        children: /*#__PURE__*/_jsx(\"a\", {\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            children: [/*#__PURE__*/_jsx(Text, {\n              type: \"secondary\",\n              children: \"\\uD314\\uB85C\\uC6CC\"\n            }), /*#__PURE__*/_jsx(Text, {\n              style: {\n                float: 'right'\n              },\n              children: userData === null || userData === void 0 ? void 0 : userData.Followers.length\n            })]\n          })\n        })\n      })\n    }), /*#__PURE__*/_jsx(Menu.Item, {\n      children: /*#__PURE__*/_jsx(Link, {\n        href: \"/profile\",\n        children: /*#__PURE__*/_jsx(\"a\", {\n          children: \"\\uD504\\uB85C\\uD544 \\uC124\\uC815\"\n        })\n      })\n    }), /*#__PURE__*/_jsxs(Menu.Item, {\n      onClick: onLogout,\n      children: [/*#__PURE__*/_jsx(LogoutOutlined, {}), \"\\uB85C\\uADF8\\uC544\\uC6C3\"]\n    })]\n  });\n\n  return userData && /*#__PURE__*/_jsx(Dropdown, {\n    overlay: menu,\n    placement: \"bottomCenter\",\n    overlayStyle: {\n      width: 180\n    },\n    children: /*#__PURE__*/_jsxs(\"a\", {\n      children: [/*#__PURE__*/_jsx(UserAvatar, {\n        userData: userData,\n        size: \"large\",\n        marginRight: 4,\n        visibleNickname: false\n      }), /*#__PURE__*/_jsx(DownOutlined, {\n        style: {\n          fontSize: 10,\n          color: '#ff8634'\n        }\n      })]\n    })\n  });\n};\n\nexport default DropdownUser;","map":{"version":3,"sources":["C:/programming/nodejs/utopia/client/components/DropdownUser.tsx"],"names":["React","useCallback","useEffect","Dropdown","Avatar","Menu","Typography","DownOutlined","LogoutOutlined","useDispatch","useSelector","Link","useSWR","fetcher","logoutRequestAction","UserAvatar","Text","DropdownUser","dispatch","logOutDone","logInDone","state","user","data","userData","mutate","onLogout","menu","cursor","id","profile","nickname","email","float","Followings","length","Followers","width","fontSize","color"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect } from 'react';\r\nimport { Dropdown, Avatar, Menu, Typography } from 'antd';\r\nimport { DownOutlined, LogoutOutlined } from '@ant-design/icons';\r\n// @ts-ignore\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport Link from 'next/link';\r\nimport useSWR from 'swr';\r\nimport { fetcher } from '@utils/fetcher';\r\nimport { logoutRequestAction } from '../reducers/user';\r\nimport UserAvatar from './UserAvatar';\r\n\r\nconst { Text } = Typography;\r\n\r\nconst DropdownUser = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const { logOutDone, logInDone } = useSelector((state: any) => state.user);\r\n\r\n  const { data: userData, mutate } = useSWR('/api/user', fetcher);\r\n\r\n  useEffect(() => {\r\n    if (logOutDone) {\r\n      mutate(null, false);\r\n    }\r\n  }, [logOutDone]);\r\n\r\n  useEffect(() => {\r\n    if (logInDone) {\r\n      mutate(userData, false);\r\n    }\r\n  }, [logInDone]);\r\n\r\n  const onLogout = useCallback(() => {\r\n    dispatch(logoutRequestAction());\r\n  }, []);\r\n\r\n  const menu = (\r\n    <Menu>\r\n      <Menu.Item disabled style={{ cursor: 'default' }}>\r\n        <div>\r\n          <Link href={`/user/${userData?.id}/illustration`}>\r\n            <a>\r\n              <Avatar src={userData?.profile ? `http://localhost:3100/${userData?.profile}` : null} size={64}>\r\n                {userData?.profile ? null : userData?.nickname[0]}\r\n              </Avatar>\r\n            </a>\r\n          </Link>\r\n        </div>\r\n        <div>\r\n          <Link href={`/user/${userData?.id}/illustration`}>\r\n            <a>\r\n              <Text strong>{userData?.nickname}</Text>\r\n            </a>\r\n          </Link>\r\n        </div>\r\n        <div>\r\n          <Text type=\"secondary\">{userData?.email}</Text>\r\n        </div>\r\n      </Menu.Item>\r\n      <Menu.Item>\r\n        <Link href={`/user/${userData?.id}/followings`}>\r\n          <a>\r\n            <div>\r\n              <Text type=\"secondary\">팔로잉</Text>\r\n              <Text style={{ float: 'right' }}>{userData?.Followings.length}</Text>\r\n            </div>\r\n          </a>\r\n        </Link>\r\n      </Menu.Item>\r\n      <Menu.Item>\r\n        <Link href={`/user/${userData?.id}/followers`}>\r\n          <a>\r\n            <div>\r\n              <Text type=\"secondary\">팔로워</Text>\r\n              <Text style={{ float: 'right' }}>{userData?.Followers.length}</Text>\r\n            </div>\r\n          </a>\r\n        </Link>\r\n      </Menu.Item>\r\n      <Menu.Item>\r\n        <Link href=\"/profile\">\r\n          <a>프로필 설정</a>\r\n        </Link>\r\n      </Menu.Item>\r\n      <Menu.Item onClick={onLogout}>\r\n        <LogoutOutlined />\r\n        로그아웃\r\n      </Menu.Item>\r\n    </Menu>\r\n  );\r\n\r\n  return (\r\n    userData && (\r\n      <Dropdown overlay={menu} placement=\"bottomCenter\" overlayStyle={{ width: 180 }}>\r\n        <a>\r\n          {/* <Avatar src={userData?.profile && `http://localhost:3100/${userData?.profile}`} size=\"large\">\r\n          {!userData?.profile && userData?.nickname[0]}\r\n        </Avatar> */}\r\n          <UserAvatar userData={userData} size=\"large\" marginRight={4} visibleNickname={false} />\r\n          <DownOutlined style={{ fontSize: 10, color: '#ff8634' }} />\r\n        </a>\r\n      </Dropdown>\r\n    )\r\n  );\r\n};\r\n\r\nexport default DropdownUser;\r\n"]},"metadata":{},"sourceType":"module"}