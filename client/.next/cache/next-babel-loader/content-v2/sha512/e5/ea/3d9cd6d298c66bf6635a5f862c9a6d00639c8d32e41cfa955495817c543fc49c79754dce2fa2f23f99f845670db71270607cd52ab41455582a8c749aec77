{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useEffect } from 'react';\nimport { Col, Row, List, Typography, Space } from 'antd';\nimport { useRouter } from 'next/router';\nimport useSWR from 'swr';\nimport Link from 'next/link';\nimport AppLayout from '@components/AppLayout';\nimport { fetcher } from '@utils/fetcher';\nimport UserPageMenu from '@components/UserPageMenu';\nimport UserPageProfile from '@components/UserPageProfile';\nimport UserAvatar from '@components/UserAvatar';\nimport { MenuHeader, MenuHeaderWrapper } from '@pages/user/[id]/style';\nimport ExpiredValidation from '@components/ExpiredValidation';\nimport wrapper from '../../../store/configureStore';\nconst {\n  Text\n} = Typography;\n\nconst UserFollowers = ({\n  user: initialUser,\n  followings: initialFollowers\n}) => {\n  const router = useRouter();\n  const {\n    id\n  } = router.query;\n  const {\n    data: userData\n  } = useSWR(`/api/user/${id}`, fetcher, {\n    initialData: initialUser\n  });\n  const {\n    data: followersData\n  } = useSWR(`/api/user/${id}/followers`, fetcher, {\n    initialData: initialFollowers\n  });\n  useEffect(() => {\n    if (followersData) console.log(followersData);\n  }, [followersData]);\n\n  if ((userData === null || userData === void 0 ? void 0 : userData.status) === 'pending') {\n    return /*#__PURE__*/_jsx(ExpiredValidation, {});\n  }\n\n  return /*#__PURE__*/_jsx(AppLayout, {\n    children: /*#__PURE__*/_jsx(Row, {\n      justify: \"center\",\n      gutter: 16,\n      children: /*#__PURE__*/_jsxs(Col, {\n        span: 18,\n        children: [/*#__PURE__*/_jsx(UserPageProfile, {\n          userData: userData\n        }), id && /*#__PURE__*/_jsx(UserPageMenu, {\n          current: \"followers\",\n          userId: parseInt(id, 10)\n        }), /*#__PURE__*/_jsx(MenuHeaderWrapper, {\n          children: /*#__PURE__*/_jsx(MenuHeader, {\n            children: `${followersData.length}명의 팔로워`\n          })\n        }), /*#__PURE__*/_jsx(Row, {\n          gutter: 8,\n          children: /*#__PURE__*/_jsx(List, {\n            dataSource: followersData,\n            renderItem: item => /*#__PURE__*/_jsx(List.Item, {\n              children: /*#__PURE__*/_jsxs(Space, {\n                size: \"large\",\n                children: [/*#__PURE__*/_jsx(Link, {\n                  href: `/user/${item.id}/illustration`,\n                  children: /*#__PURE__*/_jsx(\"a\", {\n                    children: /*#__PURE__*/_jsx(UserAvatar, {\n                      userData: item,\n                      marginRight: 8,\n                      size: \"large\"\n                    })\n                  })\n                }), item.introduction.length >= 50 ? /*#__PURE__*/_jsx(Text, {\n                  type: \"secondary\",\n                  children: `${item.introduction.slice(0, 50)}...`\n                }) : /*#__PURE__*/_jsx(Text, {\n                  type: \"secondary\",\n                  children: item.introduction\n                })]\n              })\n            })\n          })\n        })]\n      })\n    })\n  });\n};\n\nexport const getServerSideProps = wrapper.getServerSideProps(async context => {\n  var _context$params, _context$params2;\n\n  const user = await fetcher(`/api/user/${(_context$params = context.params) === null || _context$params === void 0 ? void 0 : _context$params.id}`);\n  const followings = await fetcher(`/api/user/${(_context$params2 = context.params) === null || _context$params2 === void 0 ? void 0 : _context$params2.id}/followers`);\n  return {\n    props: {\n      user,\n      followings\n    }\n  };\n});\nexport default UserFollowers;","map":{"version":3,"sources":["C:/programming/nodejs/utopia/client/pages/user/[id]/followers.tsx"],"names":["React","useEffect","Col","Row","List","Typography","Space","useRouter","useSWR","Link","AppLayout","fetcher","UserPageMenu","UserPageProfile","UserAvatar","MenuHeader","MenuHeaderWrapper","ExpiredValidation","wrapper","Text","UserFollowers","user","initialUser","followings","initialFollowers","router","id","query","data","userData","initialData","followersData","console","log","status","parseInt","length","item","introduction","slice","getServerSideProps","context","params","props"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\r\nimport { Col, Row, List, Typography, Space } from 'antd';\r\nimport { useRouter } from 'next/router';\r\nimport useSWR from 'swr';\r\nimport Link from 'next/link';\r\nimport AppLayout from '@components/AppLayout';\r\nimport { fetcher } from '@utils/fetcher';\r\nimport UserPageMenu from '@components/UserPageMenu';\r\nimport UserPageProfile from '@components/UserPageProfile';\r\nimport UserAvatar from '@components/UserAvatar';\r\nimport { IUser } from '@typings/IUser';\r\nimport { MenuHeader, MenuHeaderWrapper } from '@pages/user/[id]/style';\r\nimport ExpiredValidation from '@components/ExpiredValidation';\r\nimport wrapper from '../../../store/configureStore';\r\n\r\nconst { Text } = Typography;\r\n\r\ninterface Props {\r\n  user: IUser;\r\n  followings: IUser[];\r\n}\r\n\r\nconst UserFollowers = ({ user: initialUser, followings: initialFollowers }: Props) => {\r\n  const router = useRouter();\r\n\r\n  const { id }: { id?: string } = router.query;\r\n\r\n  const { data: userData } = useSWR(`/api/user/${id}`, fetcher, { initialData: initialUser });\r\n  const { data: followersData } = useSWR(`/api/user/${id}/followers`, fetcher, { initialData: initialFollowers });\r\n\r\n  useEffect(() => {\r\n    if (followersData) console.log(followersData);\r\n  }, [followersData]);\r\n\r\n  if (userData?.status === 'pending') {\r\n    return <ExpiredValidation />;\r\n  }\r\n\r\n  return (\r\n    <AppLayout>\r\n      <Row justify=\"center\" gutter={16}>\r\n        <Col span={18}>\r\n          <UserPageProfile userData={userData} />\r\n          {id && <UserPageMenu current=\"followers\" userId={parseInt(id, 10)} />}\r\n          <MenuHeaderWrapper>\r\n            <MenuHeader>{`${followersData.length}명의 팔로워`}</MenuHeader>\r\n          </MenuHeaderWrapper>\r\n          <Row gutter={8}>\r\n            <List\r\n              dataSource={followersData}\r\n              renderItem={(item: IUser) => (\r\n                <List.Item>\r\n                  <Space size=\"large\">\r\n                    <Link href={`/user/${item.id}/illustration`}>\r\n                      <a>\r\n                        <UserAvatar userData={item} marginRight={8} size=\"large\" />\r\n                      </a>\r\n                    </Link>\r\n                    {item.introduction.length >= 50 ? (\r\n                      <Text type=\"secondary\">{`${item.introduction.slice(0, 50)}...`}</Text>\r\n                    ) : (\r\n                      <Text type=\"secondary\">{item.introduction}</Text>\r\n                    )}\r\n                  </Space>\r\n                </List.Item>\r\n              )}\r\n            />\r\n          </Row>\r\n        </Col>\r\n      </Row>\r\n    </AppLayout>\r\n  );\r\n};\r\n\r\nexport const getServerSideProps = wrapper.getServerSideProps(async (context) => {\r\n  const user = await fetcher(`/api/user/${context.params?.id}`);\r\n  const followings = await fetcher(`/api/user/${context.params?.id}/followers`);\r\n  return { props: { user, followings } };\r\n});\r\n\r\nexport default UserFollowers;\r\n"]},"metadata":{},"sourceType":"module"}