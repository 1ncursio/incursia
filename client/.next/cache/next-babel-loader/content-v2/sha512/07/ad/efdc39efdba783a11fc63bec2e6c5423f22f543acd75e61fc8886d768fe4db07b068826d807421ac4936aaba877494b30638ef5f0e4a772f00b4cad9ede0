{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect, useMemo, useCallback } from 'react'; // @ts-ignore\n\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Col, Button, Form, Input, Typography, Modal, Avatar, Upload, message } from 'antd';\nimport ImgCrop from 'antd-img-crop';\nimport useSWR from 'swr';\nimport { fetcher } from '@utils/fetcher';\nimport useInput from '@hooks/useInput';\nimport { CHANGE_PROFILE_REQUEST, CHANGE_NICKNAME_REQUEST, CHANGE_INTRO_REQUEST } from '../reducers/user';\nconst {\n  TextArea\n} = Input;\nconst {\n  Text\n} = Typography;\n\nconst ProfileForm = () => {\n  const {\n    data: userData,\n    mutate: userMutate\n  } = useSWR('/api/user', fetcher);\n  const {\n    changeNicknameLoading,\n    changeNicknameDone,\n    changeNicknameError,\n    changeIntroLoading,\n    changeIntroDone,\n    changeIntroError\n  } = useSelector(state => state.user);\n  const [nickname, onChangeNickname, setNickname] = useInput('');\n  const [intro, onChangeIntro, setIntro] = useInput('');\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (userData) {\n      setIntro(userData.introduction);\n      setNickname(userData.nickname);\n    }\n  }, [userData === null || userData === void 0 ? void 0 : userData.introduction, userData === null || userData === void 0 ? void 0 : userData.nickname]);\n  useEffect(() => {\n    if (changeNicknameError) {\n      Modal.error({\n        content: '닉네임 변경 중에 오류가 발생했어요.'\n      });\n    }\n  }, [changeNicknameError]);\n  useEffect(() => {\n    if (changeNicknameDone) {\n      Modal.success({\n        content: '닉네임을 변경했어요!'\n      });\n    }\n  }, [changeNicknameDone]);\n  useEffect(() => {\n    if (changeIntroError) {\n      Modal.error({\n        content: '자기소개 변경 중에 오류가 발생했어요.'\n      });\n    }\n  }, [changeIntroError]);\n  useEffect(() => {\n    if (changeIntroDone) {\n      Modal.success({\n        content: '자기소개를 변경했어요!'\n      });\n    }\n  }, [changeIntroDone]);\n  const beforeUpload = useCallback(file => {\n    if (file.type !== 'image/jpg' && file.type !== 'image/jpeg' && file.type !== 'image/png') {\n      message.error('jpg jpeg png 사진만 가능해요!');\n      return false;\n    }\n\n    if (file.size > 2 * 1024 * 1024) {\n      message.error('프로필 이미지는 2MB 이하만 가능해요!');\n      return false;\n    }\n\n    const imageFormData = new FormData();\n    imageFormData.append('image', file);\n    dispatch({\n      type: CHANGE_PROFILE_REQUEST,\n      data: imageFormData\n    });\n    return true;\n  }, []);\n  const onSubmitNickname = useCallback(() => {\n    dispatch({\n      type: CHANGE_NICKNAME_REQUEST,\n      data: nickname\n    });\n    userMutate(_objectSpread(_objectSpread({}, userData), {}, {\n      nickname\n    }), false);\n  }, [nickname]);\n  const onSubmitChangeIntro = useCallback(() => {\n    dispatch({\n      type: CHANGE_INTRO_REQUEST,\n      data: intro\n    });\n    userMutate(_objectSpread(_objectSpread({}, userData), {}, {\n      introduction: intro\n    }), false);\n  }, [intro]);\n  const onUpload = useCallback(() => {\n    userMutate();\n  }, []);\n  const style = useMemo(() => ({\n    marginBottom: '20px',\n    border: '1px solid #d9d9d9',\n    padding: '20px'\n  }), []);\n  return /*#__PURE__*/_jsx(Col, {\n    xs: 24,\n    md: 12,\n    children: /*#__PURE__*/_jsxs(Form, {\n      style: style,\n      layout: \"vertical\",\n      children: [/*#__PURE__*/_jsx(Form.Item, {\n        style: {\n          textAlign: 'center'\n        },\n        children: /*#__PURE__*/_jsx(ImgCrop, {\n          rotate: true,\n          quality: 0.8,\n          modalTitle: \"\\uC774\\uBBF8\\uC9C0 \\uC870\\uC815\",\n          modalOk: \"\\uC800\\uC7A5\",\n          modalCancel: \"\\uCDE8\\uC18C\",\n          children: /*#__PURE__*/_jsx(Upload, {\n            showUploadList: false,\n            accept: \".jpg,.jpeg,.png\",\n            beforeUpload: beforeUpload,\n            onChange: onUpload,\n            children: userData && /*#__PURE__*/_jsx(Avatar, {\n              src: userData.profile ? `http://localhost:3100/${userData.profile}` : null,\n              size: 256,\n              children: userData.profile ? null : userData.nickname[0]\n            })\n          })\n        })\n      }), /*#__PURE__*/_jsx(Form.Item, {\n        label: /*#__PURE__*/_jsx(Text, {\n          strong: true,\n          children: \"\\uC774\\uBA54\\uC77C\"\n        }),\n        children: /*#__PURE__*/_jsx(Text, {\n          type: \"secondary\",\n          children: userData === null || userData === void 0 ? void 0 : userData.email\n        })\n      }), /*#__PURE__*/_jsxs(Form.Item, {\n        label: /*#__PURE__*/_jsx(Text, {\n          strong: true,\n          children: \"\\uB2C9\\uB124\\uC784\"\n        }),\n        children: [/*#__PURE__*/_jsx(Input, {\n          value: nickname,\n          onChange: onChangeNickname,\n          maxLength: 20,\n          suffix: /*#__PURE__*/_jsx(Text, {\n            type: \"secondary\",\n            children: ` ${nickname === null || nickname === void 0 ? void 0 : nickname.length} / 20`\n          })\n        }), /*#__PURE__*/_jsx(Button, {\n          type: \"primary\",\n          onClick: onSubmitNickname,\n          loading: changeNicknameLoading,\n          disabled: (userData === null || userData === void 0 ? void 0 : userData.nickname) === nickname || nickname === '' || nickname.trim() === '',\n          children: \"\\uBCC0\\uACBD\"\n        })]\n      }), /*#__PURE__*/_jsx(Form.Item, {\n        label: /*#__PURE__*/_jsx(Text, {\n          strong: true,\n          children: \"\\uC790\\uAE30\\uC18C\\uAC1C\"\n        }),\n        children: /*#__PURE__*/_jsx(TextArea, {\n          placeholder: \"\\uB2F9\\uC2E0\\uC744 \\uBA4B\\uC9C0\\uAC8C \\uC18C\\uAC1C\\uD574\\uBCF4\\uC138\\uC694!\",\n          value: intro,\n          onChange: onChangeIntro,\n          rows: 5,\n          spellCheck: false,\n          style: {\n            resize: 'none'\n          },\n          showCount: true,\n          maxLength: 500\n        })\n      }), /*#__PURE__*/_jsx(Form.Item, {\n        style: {\n          textAlign: 'center'\n        },\n        children: /*#__PURE__*/_jsx(Button, {\n          type: \"primary\",\n          shape: \"round\",\n          size: \"large\",\n          onClick: onSubmitChangeIntro,\n          loading: changeIntroLoading,\n          disabled: (userData === null || userData === void 0 ? void 0 : userData.introduction) === intro,\n          style: {\n            width: 200\n          },\n          children: \"\\uC800\\uC7A5\"\n        })\n      })]\n    })\n  });\n};\n\nexport default ProfileForm;","map":{"version":3,"sources":["C:/programming/nodejs/utopia/client/components/ProfileForm.tsx"],"names":["React","useEffect","useMemo","useCallback","useSelector","useDispatch","Col","Button","Form","Input","Typography","Modal","Avatar","Upload","message","ImgCrop","useSWR","fetcher","useInput","CHANGE_PROFILE_REQUEST","CHANGE_NICKNAME_REQUEST","CHANGE_INTRO_REQUEST","TextArea","Text","ProfileForm","data","userData","mutate","userMutate","changeNicknameLoading","changeNicknameDone","changeNicknameError","changeIntroLoading","changeIntroDone","changeIntroError","state","user","nickname","onChangeNickname","setNickname","intro","onChangeIntro","setIntro","dispatch","introduction","error","content","success","beforeUpload","file","type","size","imageFormData","FormData","append","onSubmitNickname","onSubmitChangeIntro","onUpload","style","marginBottom","border","padding","textAlign","profile","email","length","trim","resize","width"],"mappings":"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","sourcesContent":["import React, { useEffect, useMemo, useCallback } from 'react';\r\n// @ts-ignore\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { Col, Button, Form, Input, Typography, Modal, Avatar, Upload, message } from 'antd';\r\nimport ImgCrop from 'antd-img-crop';\r\nimport useSWR from 'swr';\r\nimport { fetcher } from '@utils/fetcher';\r\nimport useInput from '@hooks/useInput';\r\nimport { CHANGE_PROFILE_REQUEST, CHANGE_NICKNAME_REQUEST, CHANGE_INTRO_REQUEST } from '../reducers/user';\r\n\r\nconst { TextArea } = Input;\r\nconst { Text } = Typography;\r\n\r\nconst ProfileForm = () => {\r\n  const { data: userData, mutate: userMutate } = useSWR('/api/user', fetcher);\r\n\r\n  const {\r\n    changeNicknameLoading,\r\n    changeNicknameDone,\r\n    changeNicknameError,\r\n    changeIntroLoading,\r\n    changeIntroDone,\r\n    changeIntroError,\r\n  } = useSelector((state: any) => state.user);\r\n\r\n  const [nickname, onChangeNickname, setNickname] = useInput('');\r\n  const [intro, onChangeIntro, setIntro] = useInput('');\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (userData) {\r\n      setIntro(userData.introduction);\r\n      setNickname(userData.nickname);\r\n    }\r\n  }, [userData?.introduction, userData?.nickname]);\r\n\r\n  useEffect(() => {\r\n    if (changeNicknameError) {\r\n      Modal.error({\r\n        content: '닉네임 변경 중에 오류가 발생했어요.',\r\n      });\r\n    }\r\n  }, [changeNicknameError]);\r\n\r\n  useEffect(() => {\r\n    if (changeNicknameDone) {\r\n      Modal.success({\r\n        content: '닉네임을 변경했어요!',\r\n      });\r\n    }\r\n  }, [changeNicknameDone]);\r\n\r\n  useEffect(() => {\r\n    if (changeIntroError) {\r\n      Modal.error({\r\n        content: '자기소개 변경 중에 오류가 발생했어요.',\r\n      });\r\n    }\r\n  }, [changeIntroError]);\r\n\r\n  useEffect(() => {\r\n    if (changeIntroDone) {\r\n      Modal.success({\r\n        content: '자기소개를 변경했어요!',\r\n      });\r\n    }\r\n  }, [changeIntroDone]);\r\n\r\n  const beforeUpload = useCallback((file) => {\r\n    if (file.type !== 'image/jpg' && file.type !== 'image/jpeg' && file.type !== 'image/png') {\r\n      message.error('jpg jpeg png 사진만 가능해요!');\r\n      return false;\r\n    }\r\n    if (file.size > 2 * 1024 * 1024) {\r\n      message.error('프로필 이미지는 2MB 이하만 가능해요!');\r\n      return false;\r\n    }\r\n    const imageFormData = new FormData();\r\n    imageFormData.append('image', file);\r\n\r\n    dispatch({\r\n      type: CHANGE_PROFILE_REQUEST,\r\n      data: imageFormData,\r\n    });\r\n    return true;\r\n  }, []);\r\n\r\n  const onSubmitNickname = useCallback(() => {\r\n    dispatch({\r\n      type: CHANGE_NICKNAME_REQUEST,\r\n      data: nickname,\r\n    });\r\n    userMutate(\r\n      {\r\n        ...userData,\r\n        nickname,\r\n      },\r\n      false,\r\n    );\r\n  }, [nickname]);\r\n\r\n  const onSubmitChangeIntro = useCallback(() => {\r\n    dispatch({\r\n      type: CHANGE_INTRO_REQUEST,\r\n      data: intro,\r\n    });\r\n    userMutate(\r\n      {\r\n        ...userData,\r\n        introduction: intro,\r\n      },\r\n      false,\r\n    );\r\n  }, [intro]);\r\n\r\n  const onUpload = useCallback(() => {\r\n    userMutate();\r\n  }, []);\r\n\r\n  const style = useMemo(() => ({ marginBottom: '20px', border: '1px solid #d9d9d9', padding: '20px' }), []);\r\n  return (\r\n    <Col xs={24} md={12}>\r\n      <Form style={style} layout=\"vertical\">\r\n        <Form.Item style={{ textAlign: 'center' }}>\r\n          <ImgCrop rotate quality={0.8} modalTitle=\"이미지 조정\" modalOk=\"저장\" modalCancel=\"취소\">\r\n            <Upload showUploadList={false} accept=\".jpg,.jpeg,.png\" beforeUpload={beforeUpload} onChange={onUpload}>\r\n              {userData && (\r\n                <Avatar src={userData.profile ? `http://localhost:3100/${userData.profile}` : null} size={256}>\r\n                  {userData.profile ? null : userData.nickname[0]}\r\n                </Avatar>\r\n              )}\r\n            </Upload>\r\n          </ImgCrop>\r\n        </Form.Item>\r\n        <Form.Item label={<Text strong>이메일</Text>}>\r\n          <Text type=\"secondary\">{userData?.email}</Text>\r\n        </Form.Item>\r\n        <Form.Item label={<Text strong>닉네임</Text>}>\r\n          <Input\r\n            value={nickname}\r\n            onChange={onChangeNickname}\r\n            maxLength={20}\r\n            suffix={<Text type=\"secondary\">{` ${nickname?.length} / 20`}</Text>}\r\n          />\r\n          <Button\r\n            type=\"primary\"\r\n            onClick={onSubmitNickname}\r\n            loading={changeNicknameLoading}\r\n            disabled={userData?.nickname === nickname || nickname === '' || nickname.trim() === ''}\r\n          >\r\n            변경\r\n          </Button>\r\n        </Form.Item>\r\n        <Form.Item label={<Text strong>자기소개</Text>}>\r\n          <TextArea\r\n            placeholder=\"당신을 멋지게 소개해보세요!\"\r\n            value={intro}\r\n            onChange={onChangeIntro}\r\n            rows={5}\r\n            spellCheck={false}\r\n            style={{ resize: 'none' }}\r\n            showCount\r\n            maxLength={500}\r\n          />\r\n        </Form.Item>\r\n        <Form.Item style={{ textAlign: 'center' }}>\r\n          <Button\r\n            type=\"primary\"\r\n            shape=\"round\"\r\n            size=\"large\"\r\n            onClick={onSubmitChangeIntro}\r\n            loading={changeIntroLoading}\r\n            disabled={userData?.introduction === intro}\r\n            style={{\r\n              width: 200,\r\n            }}\r\n          >\r\n            저장\r\n          </Button>\r\n        </Form.Item>\r\n      </Form>\r\n    </Col>\r\n  );\r\n};\r\n\r\nexport default ProfileForm;\r\n"]},"metadata":{},"sourceType":"module"}