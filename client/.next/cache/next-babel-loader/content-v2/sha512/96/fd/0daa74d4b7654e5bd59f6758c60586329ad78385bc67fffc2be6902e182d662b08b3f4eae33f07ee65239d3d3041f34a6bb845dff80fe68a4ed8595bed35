{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\programming\\\\nodejs\\\\utopia\\\\client\\\\components\\\\IllustCard.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { Image, Typography, Tag, Modal, Tooltip, Space } from 'antd';\nimport Link from 'next/link';\nimport Router, { useRouter } from 'next/router';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { HeartOutlined, ShareAltOutlined, DeleteOutlined, AlertOutlined, HeartFilled, EyeFilled } from '@ant-design/icons';\nimport moment from 'moment';\nimport useSWR from 'swr';\nimport { LIKE_POST_REQUEST, REMOVE_POST_REQUEST, DISLIKE_POST_REQUEST } from '../reducers/post';\nimport { fetcher } from '@utils/fetcher';\nimport styled from 'styled-components';\nmoment.locale('ko');\nvar Title = Typography.Title,\n    Paragraph = Typography.Paragraph,\n    Text = Typography.Text;\nvar PostContent = styled.div.withConfig({\n  displayName: \"IllustCard__PostContent\",\n  componentId: \"sc-1ewoq5x-0\"\n})([\"margin:32px 0 48px 0;\"]);\n_c = PostContent;\n\nvar IllustCard = function IllustCard(_ref) {\n  _s();\n\n  var postData = _ref.postData;\n  var dispatch = useDispatch();\n\n  var _useState = useState(false),\n      liked = _useState[0],\n      setLiked = _useState[1];\n\n  var _useSWR = useSWR('/api/user', fetcher),\n      userData = _useSWR.data,\n      userError = _useSWR.error;\n\n  var _useSelector = useSelector(function (state) {\n    return state.post;\n  }),\n      removePostDone = _useSelector.removePostDone;\n\n  useEffect(function () {\n    if (userData) setLiked(postData.Likers.find(function (v) {\n      return v.id === (userData === null || userData === void 0 ? void 0 : userData.id);\n    }));\n  }, [userData]);\n  var onLike = useCallback(function () {\n    if (!userData) {\n      return alert('로그인이 필요합니다.');\n    }\n\n    dispatch({\n      type: LIKE_POST_REQUEST,\n      data: postData.id\n    });\n    setLiked(function (prev) {\n      return !prev;\n    });\n  }, [userData, postData === null || postData === void 0 ? void 0 : postData.id]);\n  var onDislike = useCallback(function () {\n    if (!userData) {\n      return alert('로그인이 필요합니다.');\n    }\n\n    dispatch({\n      type: DISLIKE_POST_REQUEST,\n      data: postData.id\n    });\n    setLiked(function (prev) {\n      return !prev;\n    });\n  }, [userData, postData === null || postData === void 0 ? void 0 : postData.id]);\n  var onClickDelete = useCallback(function () {\n    // 로그인 안 한 경우\n    if (!userData) {\n      return Modal.error({\n        content: '로그인이 필요합니다.',\n        okText: '확인'\n      });\n    }\n\n    Modal.confirm({\n      title: '글 삭제',\n      content: '정말로 이 글을 삭제하시겠어요?',\n      okText: '삭제',\n      cancelText: '취소',\n      onOk: function onOk() {\n        dispatch({\n          type: REMOVE_POST_REQUEST,\n          data: postData.id\n        });\n      }\n    });\n  }, [userData, postData === null || postData === void 0 ? void 0 : postData.id]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Image.PreviewGroup, {\n      children: postData === null || postData === void 0 ? void 0 : postData.Images.map(function (v) {\n        return /*#__PURE__*/_jsxDEV(Image, {\n          width: \"100%\",\n          src: \"http://localhost:3100/\".concat(v.src)\n        }, v.src, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, _this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Space, {\n      style: {\n        \"float\": 'right'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n        title: \"\\uC88B\\uC544\\uC694!\",\n        children: liked ? /*#__PURE__*/_jsxDEV(HeartFilled, {\n          style: {\n            fontSize: 24,\n            opacity: 0.9\n          },\n          onClick: onDislike\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, _this) : /*#__PURE__*/_jsxDEV(HeartOutlined, {\n          style: {\n            fontSize: 24,\n            opacity: 0.9\n          },\n          onClick: onLike\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Tooltip, {\n        title: \"\\uACF5\\uC720\\uD558\\uAE30!\",\n        children: /*#__PURE__*/_jsxDEV(ShareAltOutlined, {\n          style: {\n            fontSize: 24,\n            opacity: 0.9\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Tooltip, {\n        title: \"\\uC2E0\\uACE0\\uD558\\uAE30\",\n        children: /*#__PURE__*/_jsxDEV(AlertOutlined, {\n          style: {\n            fontSize: 24,\n            opacity: 0.9\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, _this), (userData === null || userData === void 0 ? void 0 : userData.id) === (postData === null || postData === void 0 ? void 0 : postData.User.id) ? /*#__PURE__*/_jsxDEV(Tooltip, {\n        title: \"\\uC0AD\\uC81C\\uD558\\uAE30\",\n        children: /*#__PURE__*/_jsxDEV(DeleteOutlined, {\n          style: {\n            fontSize: 24\n          },\n          onClick: onClickDelete\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, _this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(PostContent, {\n      children: [/*#__PURE__*/_jsxDEV(Title, {\n        level: 3,\n        children: postData === null || postData === void 0 ? void 0 : postData.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Paragraph, {\n        children: postData === null || postData === void 0 ? void 0 : postData.caption\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: postData === null || postData === void 0 ? void 0 : postData.Tags.map(function (tag) {\n          return /*#__PURE__*/_jsxDEV(Link, {\n            href: \"/tag/\".concat(encodeURIComponent(tag.name)),\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              children: /*#__PURE__*/_jsxDEV(Tag, {\n                color: \"blue\",\n                children: tag.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 17\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 15\n            }, _this)\n          }, tag.name, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, _this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Space, {\n        size: \"middle\",\n        style: {\n          margin: '16px 0'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [/*#__PURE__*/_jsxDEV(HeartFilled, {\n            style: {\n              opacity: 0.45,\n              padding: 4\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(Text, {\n            type: \"secondary\",\n            style: {\n              fontSize: '0.8rem'\n            },\n            children: postData === null || postData === void 0 ? void 0 : postData.Likers.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [/*#__PURE__*/_jsxDEV(EyeFilled, {\n            style: {\n              opacity: 0.45,\n              padding: 4\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(Text, {\n            type: \"secondary\",\n            style: {\n              fontSize: '0.8rem'\n            },\n            children: postData === null || postData === void 0 ? void 0 : postData.views\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Text, {\n          type: \"secondary\",\n          children: moment(postData === null || postData === void 0 ? void 0 : postData.createdAt).format('YYYY년 MM월 DD일 HH:mm')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(IllustCard, \"yZc2P9ygj1yNw5jGUok1Xr8ScKI=\", false, function () {\n  return [useDispatch, useSWR, useSelector];\n});\n\n_c2 = IllustCard;\nexport default IllustCard;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"PostContent\");\n$RefreshReg$(_c2, \"IllustCard\");","map":{"version":3,"sources":["C:/programming/nodejs/utopia/client/components/IllustCard.js"],"names":["React","useCallback","useEffect","useState","Image","Typography","Tag","Modal","Tooltip","Space","Link","Router","useRouter","useDispatch","useSelector","HeartOutlined","ShareAltOutlined","DeleteOutlined","AlertOutlined","HeartFilled","EyeFilled","moment","useSWR","LIKE_POST_REQUEST","REMOVE_POST_REQUEST","DISLIKE_POST_REQUEST","fetcher","styled","locale","Title","Paragraph","Text","PostContent","div","IllustCard","postData","dispatch","liked","setLiked","userData","data","userError","error","state","post","removePostDone","Likers","find","v","id","onLike","alert","type","prev","onDislike","onClickDelete","content","okText","confirm","title","cancelText","onOk","Images","map","src","fontSize","opacity","User","caption","Tags","tag","encodeURIComponent","name","margin","padding","length","views","createdAt","format"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from 'react';\r\nimport { Image, Typography, Tag, Modal, Tooltip, Space } from 'antd';\r\nimport Link from 'next/link';\r\nimport Router, { useRouter } from 'next/router';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { HeartOutlined, ShareAltOutlined, DeleteOutlined, AlertOutlined, HeartFilled, EyeFilled } from '@ant-design/icons';\r\nimport moment from 'moment';\r\nimport useSWR from 'swr';\r\nimport { LIKE_POST_REQUEST, REMOVE_POST_REQUEST, DISLIKE_POST_REQUEST } from '../reducers/post';\r\nimport { fetcher } from '@utils/fetcher';\r\nimport styled from 'styled-components';\r\n\r\nmoment.locale('ko');\r\n\r\nconst { Title, Paragraph, Text } = Typography;\r\n\r\nconst PostContent = styled.div`\r\n  margin: 32px 0 48px 0;\r\n`;\r\n\r\nconst IllustCard = ({ postData }) => {\r\n  const dispatch = useDispatch();\r\n  const [liked, setLiked] = useState(false);\r\n\r\n  const { data: userData, error: userError } = useSWR('/api/user', fetcher);\r\n\r\n  const { removePostDone } = useSelector((state) => state.post);\r\n\r\n  useEffect(() => {\r\n    if (userData) setLiked(postData.Likers.find((v) => v.id === userData?.id));\r\n  }, [userData]);\r\n\r\n  const onLike = useCallback(() => {\r\n    if (!userData) {\r\n      return alert('로그인이 필요합니다.');\r\n    }\r\n    dispatch({ type: LIKE_POST_REQUEST, data: postData.id });\r\n    setLiked((prev) => !prev);\r\n  }, [userData, postData?.id]);\r\n\r\n  const onDislike = useCallback(() => {\r\n    if (!userData) {\r\n      return alert('로그인이 필요합니다.');\r\n    }\r\n    dispatch({ type: DISLIKE_POST_REQUEST, data: postData.id });\r\n    setLiked((prev) => !prev);\r\n  }, [userData, postData?.id]);\r\n\r\n  const onClickDelete = useCallback(() => {\r\n    // 로그인 안 한 경우\r\n    if (!userData) {\r\n      return Modal.error({\r\n        content: '로그인이 필요합니다.',\r\n        okText: '확인',\r\n      });\r\n    }\r\n\r\n    Modal.confirm({\r\n      title: '글 삭제',\r\n      content: '정말로 이 글을 삭제하시겠어요?',\r\n      okText: '삭제',\r\n      cancelText: '취소',\r\n      onOk: () => {\r\n        dispatch({\r\n          type: REMOVE_POST_REQUEST,\r\n          data: postData.id,\r\n        });\r\n      },\r\n    });\r\n  }, [userData, postData?.id]);\r\n\r\n  return (\r\n    <>\r\n      <Image.PreviewGroup>\r\n        {postData?.Images.map((v) => (\r\n          <Image width=\"100%\" key={v.src} src={`http://localhost:3100/${v.src}`} />\r\n        ))}\r\n      </Image.PreviewGroup>\r\n      <Space style={{ float: 'right' }}>\r\n        <Tooltip title=\"좋아요!\">\r\n          {liked ? (\r\n            <HeartFilled style={{ fontSize: 24, opacity: 0.9 }} onClick={onDislike} />\r\n          ) : (\r\n            <HeartOutlined style={{ fontSize: 24, opacity: 0.9 }} onClick={onLike} />\r\n          )}\r\n        </Tooltip>\r\n        <Tooltip title=\"공유하기!\">\r\n          <ShareAltOutlined style={{ fontSize: 24, opacity: 0.9 }} />\r\n        </Tooltip>\r\n        <Tooltip title=\"신고하기\">\r\n          <AlertOutlined style={{ fontSize: 24, opacity: 0.9 }} />\r\n        </Tooltip>\r\n\r\n        {userData?.id === postData?.User.id ? (\r\n          <Tooltip title=\"삭제하기\">\r\n            <DeleteOutlined style={{ fontSize: 24 }} onClick={onClickDelete} />\r\n          </Tooltip>\r\n        ) : null}\r\n      </Space>\r\n      <PostContent>\r\n        <Title level={3}>{postData?.title}</Title>\r\n        <Paragraph>{postData?.caption}</Paragraph>\r\n        <div>\r\n          {postData?.Tags.map((tag) => (\r\n            <Link href={`/tag/${encodeURIComponent(tag.name)}`} key={tag.name}>\r\n              <a>\r\n                <Tag color=\"blue\">{tag.name}</Tag>\r\n              </a>\r\n            </Link>\r\n          ))}\r\n        </div>\r\n        <Space size=\"middle\" style={{ margin: '16px 0' }}>\r\n          <span>\r\n            <HeartFilled style={{ opacity: 0.45, padding: 4 }} />\r\n            <Text type=\"secondary\" style={{ fontSize: '0.8rem' }}>\r\n              {postData?.Likers.length}\r\n            </Text>\r\n          </span>\r\n          <span>\r\n            <EyeFilled style={{ opacity: 0.45, padding: 4 }} />\r\n            <Text type=\"secondary\" style={{ fontSize: '0.8rem' }}>\r\n              {postData?.views}\r\n            </Text>\r\n          </span>\r\n        </Space>\r\n        <div>\r\n          <Text type=\"secondary\">{moment(postData?.createdAt).format('YYYY년 MM월 DD일 HH:mm')}</Text>\r\n        </div>\r\n      </PostContent>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default IllustCard;\r\n"]},"metadata":{},"sourceType":"module"}